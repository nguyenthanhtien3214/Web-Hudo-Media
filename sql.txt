-- Tạo cơ sở dữ liệu
CREATE DATABASE camera_rental;
USE camera_rental;


-- Tạo bảng customers (Khách hàng)
CREATE TABLE customers (
    customer_id INT IDENTITY(1,1) PRIMARY KEY,
    name NVARCHAR(255) NOT NULL,
    email NVARCHAR(255) NOT NULL UNIQUE,
    phone NVARCHAR(50) NOT NULL,
    address NVARCHAR(255),
    created_at DATETIME DEFAULT GETDATE()
);
GO

-- Tạo bảng categories (Danh mục sản phẩm)
CREATE TABLE categories (
    category_id INT IDENTITY(1,1) PRIMARY KEY,
    name NVARCHAR(255) NOT NULL
);
GO

-- Tạo bảng products (Sản phẩm)
CREATE TABLE products (
    product_id INT IDENTITY(1,1) PRIMARY KEY,
    name NVARCHAR(255) NOT NULL,
    description NVARCHAR(MAX),
    price DECIMAL(10, 2) NOT NULL,
    image NVARCHAR(255),
    quantity INT NOT NULL,
    category_id INT,
    FOREIGN KEY (category_id) REFERENCES categories(category_id)
);
GO
ALTER TABLE products
ADD image_url NVARCHAR(255);
ALTER TABLE products
ADD CONSTRAINT UQ_products_name UNIQUE (name);

-- Tạo bảng carts (Giỏ hàng)
CREATE TABLE carts (
    cart_id INT IDENTITY(1,1) PRIMARY KEY,
    customer_id INT,
    created_at DATETIME DEFAULT GETDATE(),
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
);
GO

-- Tạo bảng cart_items (Sản phẩm trong giỏ hàng)
CREATE TABLE cart_items (
    cart_item_id INT IDENTITY(1,1) PRIMARY KEY,
    cart_id INT,
    product_id INT,
    quantity INT NOT NULL,
    FOREIGN KEY (cart_id) REFERENCES carts(cart_id),
    FOREIGN KEY (product_id) REFERENCES products(product_id)
);
GO

-- Tạo bảng orders (Đơn hàng)
CREATE TABLE orders (
    order_id INT IDENTITY(1,1) PRIMARY KEY,
    customer_id INT,
    total_amount DECIMAL(10, 2) NOT NULL,
    status NVARCHAR(50) NOT NULL,
    created_at DATETIME DEFAULT GETDATE(),
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
);
GO

-- Tạo bảng order_items (Sản phẩm trong đơn hàng)
CREATE TABLE order_items (
    order_item_id INT IDENTITY(1,1) PRIMARY KEY,
    order_id INT,
    product_id INT,
    quantity INT NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (order_id) REFERENCES orders(order_id),
    FOREIGN KEY (product_id) REFERENCES products(product_id)
);
GO

-- Tạo bảng invoices (Hóa đơn)
CREATE TABLE invoices (
    invoice_id INT IDENTITY(1,1) PRIMARY KEY,
    order_id INT,
    customer_id INT,
    amount DECIMAL(10, 2) NOT NULL,
    created_at DATETIME DEFAULT GETDATE(),
    FOREIGN KEY (order_id) REFERENCES orders(order_id),
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
);
GO

-- Thêm danh mục sản phẩm
INSERT INTO categories (name) VALUES ('May anh chuyen nghiep');
INSERT INTO categories (name) VALUES ('Phu kien may anh');

-- Thêm sản phẩm
INSERT INTO products (name, description, price, image, quantity, category_id)
VALUES ('Canon EOS 5D Mark IV', 'May anh Canon EOS 5D Mark IV co do phan giai cao, man hinh cam ung, va kha nang quay phim 4K.', 250.00, 'canon_eos_5d_mark_iv.jpg', 5, 1);

INSERT INTO products (name, description, price, image, quantity, category_id)
VALUES ('Nikon D850', 'May anh Nikon D850 voi do phan giai 45.7MP, kha nang quay phim 8K time-lapse, va man hinh cam ung.', 300.00, 'nikon_d850.jpg', 3, 1);

INSERT INTO products (name, description, price, image, quantity, category_id)
VALUES ('Sony Alpha a7 III', 'May anh Sony Alpha a7 III voi cam bien 24.2MP, kha nang quay phim 4K, va chong rung 5 truc.', 200.00, 'sony_alpha_a7_iii.jpg', 7, 1);

INSERT INTO products (name, description, price, image, quantity, category_id)
VALUES ('The nho SanDisk 128GB', 'The nho SanDisk 128GB voi toc do doc 170MB/s va toc do ghi 90MB/s.', 30.00, 'sandisk_128gb.jpg', 10, 2);

INSERT INTO products (name, description, price, image, quantity, category_id)
VALUES ('Chan may tripod Manfrotto', 'Chan may tripod Manfrotto voi chieu cao toi da 165cm, chiu tai toi da 8kg.', 50.00, 'manfrotto_tripod.jpg', 8, 2);

select *from categories
delete  from products
SINSERT INTO categories (name)
VALUES 
('Electronics'),
('Books'),
('Clothing'),
('Toys');

INSERT INTO products (name, description, price, image, quantity, category_id)
VALUES 
('Smartphone', 'A smartphone with 4GB RAM and 64GB storage', 299.99, 'smartphone.jpg', 50, 1),
('Laptop', 'A laptop with 16GB RAM and 512GB SSD', 999.99, 'laptop.jpg', 30, 1),
('Fiction Book', 'A thrilling fiction novel', 19.99, 'fiction_book.jpg', 100, 2),
('T-Shirt', 'A comfortable cotton t-shirt', 9.99, 'tshirt.jpg', 200, 3),
('Action Figure', 'An action figure from a popular series', 14.99, 'action_figure.jpg', 75, 4);


UPDATE products SET image_url = 'images/1.png' WHERE product_id = 1;
UPDATE products SET image_url = 'images/2.png' WHERE product_id = 2;
UPDATE products SET image_url = 'images/3.jpg' WHERE product_id = 3;
UPDATE products SET image_url = 'images/4.jpg' WHERE product_id = 4;
UPDATE products SET image_url = 'images/5.jpg' WHERE product_id = 5;
UPDATE products SET image_url = 'images/6.jpg' WHERE product_id = 6;
UPDATE products SET image_url = 'images/7.jpg' WHERE product_id = 7;
UPDATE products SET image_url = 'images/8.jpg' WHERE product_id = 8;
UPDATE products SET image_url = 'images/9.jpg' WHERE product_id = 9;
UPDATE products SET image_url = 'images/10.jpg' WHERE product_id = 10;


