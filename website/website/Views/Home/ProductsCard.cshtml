@model website.Models.Product

@{
    ViewData["Title"] = "ProductsCard";
}

<!-- Thêm liên kết đến tệp CSS -->
<link rel="stylesheet" href="~/css/product-details.css" />

<h1>@Model.Name</h1>

<div class="product-detail">
    <div class="product-detail__photo">
        @if (!string.IsNullOrEmpty(Model.ImageUrl))
        {
            var imageUrl = Model.ImageUrl.StartsWith("images/") ? Model.ImageUrl : "images/" + Model.ImageUrl;
            <img src="@Url.Content("~/" + imageUrl)" alt="@Model.Name" style="max-width: 100%; height: auto;" />
        }
    </div>
    <div class="product-detail__info">
        <p><strong>Danh mục:</strong> @Model.Category?.Name</p>
        <p><strong>Mô tả:</strong> @Model.Description</p>
        <p><strong>Giá:</strong> @Model.Price.ToString("C")</p>

        <!-- Tính năng tăng giảm số lượng -->
        <div class="quantity-selector">
            <label for="quantity"><strong>Số lượng:</strong></label>
            <button type="button" onclick="decrementQuantity()">-</button>
            <input type="number" id="quantity" name="quantity" value="1" min="1" />
            <button type="button" onclick="incrementQuantity()">+</button>
        </div>

        <!-- Nhập số ngày thuê -->
        <div class="rental-days-selector">
            <label for="rentalDays"><strong>Số ngày thuê:</strong></label>
            <input type="number" id="rentalDays" name="rentalDays" value="1" min="1" max="365" />
        </div>

        <!-- Nút Thêm Vào Giỏ -->
        <form asp-action="AddToCart" method="post">
            <input type="hidden" name="productId" value="@Model.ProductId" />
            <input type="hidden" id="quantityInput" name="quantity" value="1" />
            <input type="hidden" id="rentalDaysInput" name="rentalDays" value="1" />
            <button type="submit">Thêm Vào Giỏ</button>
        </form>
    </div>
</div>

<!-- Script để tăng giảm số lượng và xử lý logic Thêm Vào Giỏ -->
<script>
    function incrementQuantity() {
        var quantityInput = document.getElementById('quantity');
        quantityInput.value = parseInt(quantityInput.value) + 1;
        document.getElementById('quantityInput').value = quantityInput.value;
    }

    function decrementQuantity() {
        var quantityInput = document.getElementById('quantity');
        if (quantityInput.value > 1) {
            quantityInput.value = parseInt(quantityInput.value) - 1;
            document.getElementById('quantityInput').value = quantityInput.value;
        }
    }

    document.getElementById('rentalDays').addEventListener('input', function () {
        document.getElementById('rentalDaysInput').value = this.value;
    });
</script>